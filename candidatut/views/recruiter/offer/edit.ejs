<!doctype html>
<html lang="fr">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <link rel='stylesheet' href='/stylesheets/style.css' />
    </head>
    <body>
        <header>
            <div class="container-fluid">
                <%- include('../../header'); %>
                <nav>
                    <div class="row py-2 bg-light border-top border-bottom">
                        <div class="col px-5">
                            <div class="d-flex justify-content-end">
                                <a href="/recruiter/offer_detail/<%= offer.id %>" role="button" class="btn btn-danger">Retour</a>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </header>
        <section class="container-md p-4">
            <h1>Edition de l'offre n°<%= id %></h1>
            <form class="justify-content-center" action="/recruiter/edit_offer/<%= offer.id %>" method="post">
                <div class="mb-3">
                    <label for="inputName" class="form-label">Nom</label>
                    <input required name="name" type="name" value="<%= offer.nom %>" class="form-control" id="inputName" aria-describedby="nameHelp">
                </div>
                <div class="mb-3">
                    <label for="inputValidityDate" class="form-label">Date de validité</label>
                    <input required name="validityDate" type="date" value="<%= offer.date_creation.toISOString().split('T')[0]; %>" class="form-control" id="inputValidityDate" aria-describedby="validityDateHelp">
                </div>
                <div class="mb-3">
                    <label for="inputNbFiles" class="form-label">Nombre de pièces demandées</label>
                    <input required name="nbFiles" type="number"  value="<%= offer.nombre_pieces_demandees %>"class="form-control" id="inputNbFiles" aria-describedby="nbFilesHelp">
                </div>
                <div class="mb-3">
                    <label for="inputFileTypes" class="form-label">Type de pièces demandées</label>
                    <input required name="fileTypes" type="text" value="<%= offer.pieces_demandees %>" class="form-control" id="inputFileTypes" aria-describedby="fileTypesHelp">
                </div>
                <div class="mb-3">
                    <label for="inputPostFile" class="form-label">Fiche de poste</label>
                    <select required name="postFile" type="text" class="form-control" id="inputPostFile" aria-describedby="postFileHelp">
                        <% postFiles.forEach(element => { %>
                            <option value="<%= element.id %>" <% if (element.id === ficheDePoste) { %> selected <% } %>><%= element.intitule %> (<%= element.statut %>): <%= element.type_metier %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="inputDescription" class="form-label">Description</label>
                    <textarea required name="description" id="inputDescription" class="form-control" aria-describedby="descriptionHelp" rows="5" cols="80"><%= offer.description %></textarea>
                </div>

                <button type="submit" class="btn btn-primary">Editer l'offre</button>
            </form>
        </section>
        <footer class="text-center text-lg-start bg-light text-muted">
            <section class="d-flex justify-content-center justify-content-lg-around p-4 border-bottom border-top">
                <a role="button" href="/recruiter/offers/" class="btn btn-danger">Retour aux offres</a>
            </section>
        </footer>
    </body>
</html>